# 域名配置说明

## 配置文件说明

项目中使用了可配置的域名配置文件 `config.js`，该文件不会被webpack编译，可以在打包后直接修改，无需重新编译应用。

## 配置文件位置

配置文件位于 `public/config.js`，打包后会在根目录下。

## 配置文件内容

```js
window.domainConfig = {
  // 主域名配置 - 主网站
  baseUrl: 'https://dingzan.vip',

  // 中间跳转等待页面域名
  waitingUrl: 'https://u93.store',

  // 支付页面域名配置 - 通配符域名格式为字母数字随机组成
  paymentUrl: 'https://{subdomain}.u93.us',

  // API服务域名配置
  apiUrl: 'https://api.dingzan.vip',

  // 子域名长度配置 - 指定随机生成的子域名字符数量(默认为2)
  subdomainLength: 3,

  // 其他可能需要的域名配置
  // cdnUrl: 'https://cdn.example.com',
}
```

## 域名说明

- **baseUrl**: 主网站域名 (dingzan.vip)
- **waitingUrl**: 中间跳转等待页面域名 (u93.store)
- **paymentUrl**: 支付页面域名，使用随机字母数字组成的子域名
  - 支付页面会自动生成一个随机字母数字组合的子域名
  - 在配置中使用 `{subdomain}` 作为占位符，系统会自动替换
- **apiUrl**: API服务域名
- **subdomainLength**: 子域名长度配置，决定随机生成的子域名字符数量
  - 默认为2位，可以根据需要设置为3位或更多
  - 例如：设置为3时，生成的子域名可能是 abc.u93.us
  - 设置为4时，生成的子域名可能是 abcd.u93.us

## 跳转流程

1. 用户在主站点选择充值金额点击充值，系统会生成16位数字订单号
2. 系统跳转到等待页面 (loading.html)，显示加载中和订单信息
3. 等待页面根据配置生成指定长度的随机子域名，然后跳转到支付页面
4. 支付完成后根据业务逻辑返回主站点

## 订单号生成

系统会自动生成16位数字UUID作为订单号：

- 前10位是时间戳
- 后6位是随机数字
- 订单号会在整个支付流程中传递，确保交易可跟踪

## 如何修改域名配置

1. 找到项目打包后的部署目录
2. 编辑根目录下的 `config.js` 文件
3. 修改相应的域名配置
4. 保存文件即可生效，无需重新编译应用

## 注意事项

- 确保修改后的 `config.js` 文件格式正确，否则可能导致应用无法正常运行
- 域名配置中不要包含尾部斜杠，路径会在使用时自动添加
- 支付页面域名中的 `{subdomain}` 占位符是必需的，系统会自动替换为随机生成的子域名
- 可以通过修改 `subdomainLength` 配置项来调整随机子域名的长度
- 在测试环境和生产环境部署前，请检查并确认域名配置是否正确
